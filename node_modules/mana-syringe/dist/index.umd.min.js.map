{"version":3,"file":"index.umd.min.js","sources":["../../../node_modules/inversify/es/constants/metadata_keys.js","../../../node_modules/inversify/es/constants/literal_types.js","../../../node_modules/inversify/es/utils/id.js","../../../node_modules/inversify/es/bindings/binding.js","../../../node_modules/inversify/es/constants/error_msgs.js","../../../node_modules/inversify/es/planning/metadata_reader.js","../../../node_modules/inversify/es/bindings/binding_count.js","../../../node_modules/inversify/es/utils/exceptions.js","../../../node_modules/inversify/es/utils/serialization.js","../../../node_modules/inversify/es/planning/context.js","../../../node_modules/inversify/es/planning/metadata.js","../../../node_modules/inversify/es/planning/plan.js","../../../node_modules/inversify/es/annotation/decorator_utils.js","../../../node_modules/inversify/es/annotation/inject.js","../../../node_modules/inversify/es/planning/queryable_string.js","../../../node_modules/inversify/es/planning/target.js","../../../node_modules/inversify/es/planning/reflection_utils.js","../../../node_modules/inversify/es/planning/request.js","../../../node_modules/inversify/es/planning/planner.js","../../../node_modules/inversify/es/resolution/instantiation.js","../../../node_modules/inversify/es/resolution/resolver.js","../../../node_modules/inversify/es/syntax/constraint_helpers.js","../../../node_modules/inversify/es/syntax/binding_when_syntax.js","../../../node_modules/inversify/es/syntax/binding_on_syntax.js","../../../node_modules/inversify/es/syntax/binding_when_on_syntax.js","../../../node_modules/inversify/es/syntax/binding_in_syntax.js","../../../node_modules/inversify/es/syntax/binding_in_when_on_syntax.js","../../../node_modules/inversify/es/syntax/binding_to_syntax.js","../../../node_modules/inversify/es/container/container_snapshot.js","../../../node_modules/inversify/es/container/lookup.js","../../../node_modules/inversify/es/container/container.js","../../../node_modules/inversify/es/container/container_module.js","../../../node_modules/inversify/es/annotation/injectable.js","../../../node_modules/reflect-metadata/Reflect.js","../src/core.ts","../src/inversify/index.ts","../src/decorator.ts","../../../node_modules/inversify/es/annotation/named.js","../src/side-option.ts","../src/register.ts","../src/inversify/inversify-protocol.ts","../src/contribution/contribution-protocol.ts","../src/contribution/contribution-provider.ts","../src/contribution/contribution-register.ts","../src/module/syringe-module.ts","../src/container.ts","../src/contribution/index.ts","../src/module/index.ts","../src/contribution/decorator.ts","../../../node_modules/inversify/es/annotation/optional.js","../../../node_modules/inversify/es/annotation/post_construct.js","../../../node_modules/inversify/es/annotation/unmanaged.js"],"sourcesContent":["export var NAMED_TAG = \"named\";\nexport var NAME_TAG = \"name\";\nexport var UNMANAGED_TAG = \"unmanaged\";\nexport var OPTIONAL_TAG = \"optional\";\nexport var INJECT_TAG = \"inject\";\nexport var MULTI_INJECT_TAG = \"multi_inject\";\nexport var TAGGED = \"inversify:tagged\";\nexport var TAGGED_PROP = \"inversify:tagged_props\";\nexport var PARAM_TYPES = \"inversify:paramtypes\";\nexport var DESIGN_PARAM_TYPES = \"design:paramtypes\";\nexport var POST_CONSTRUCT = \"post_construct\";\nfunction getNonCustomTagKeys() {\n    return [\n        INJECT_TAG,\n        MULTI_INJECT_TAG,\n        NAME_TAG,\n        UNMANAGED_TAG,\n        NAMED_TAG,\n        OPTIONAL_TAG,\n    ];\n}\nexport var NON_CUSTOM_TAG_KEYS = getNonCustomTagKeys();\n//# sourceMappingURL=metadata_keys.js.map","var BindingScopeEnum = {\n    Request: \"Request\",\n    Singleton: \"Singleton\",\n    Transient: \"Transient\"\n};\nvar BindingTypeEnum = {\n    ConstantValue: \"ConstantValue\",\n    Constructor: \"Constructor\",\n    DynamicValue: \"DynamicValue\",\n    Factory: \"Factory\",\n    Function: \"Function\",\n    Instance: \"Instance\",\n    Invalid: \"Invalid\",\n    Provider: \"Provider\"\n};\nvar TargetTypeEnum = {\n    ClassProperty: \"ClassProperty\",\n    ConstructorArgument: \"ConstructorArgument\",\n    Variable: \"Variable\"\n};\nexport { BindingScopeEnum, BindingTypeEnum, TargetTypeEnum };\n//# sourceMappingURL=literal_types.js.map","var idCounter = 0;\nfunction id() {\n    return idCounter++;\n}\nexport { id };\n//# sourceMappingURL=id.js.map","import { BindingScopeEnum, BindingTypeEnum } from \"../constants/literal_types\";\nimport { id } from \"../utils/id\";\nvar Binding = (function () {\n    function Binding(serviceIdentifier, scope) {\n        this.id = id();\n        this.activated = false;\n        this.serviceIdentifier = serviceIdentifier;\n        this.scope = scope;\n        this.type = BindingTypeEnum.Invalid;\n        this.constraint = function (request) { return true; };\n        this.implementationType = null;\n        this.cache = null;\n        this.factory = null;\n        this.provider = null;\n        this.onActivation = null;\n        this.dynamicValue = null;\n    }\n    Binding.prototype.clone = function () {\n        var clone = new Binding(this.serviceIdentifier, this.scope);\n        clone.activated = (clone.scope === BindingScopeEnum.Singleton) ? this.activated : false;\n        clone.implementationType = this.implementationType;\n        clone.dynamicValue = this.dynamicValue;\n        clone.scope = this.scope;\n        clone.type = this.type;\n        clone.factory = this.factory;\n        clone.provider = this.provider;\n        clone.constraint = this.constraint;\n        clone.onActivation = this.onActivation;\n        clone.cache = this.cache;\n        return clone;\n    };\n    return Binding;\n}());\nexport { Binding };\n//# sourceMappingURL=binding.js.map","export var DUPLICATED_INJECTABLE_DECORATOR = \"Cannot apply @injectable decorator multiple times.\";\nexport var DUPLICATED_METADATA = \"Metadata key was used more than once in a parameter:\";\nexport var NULL_ARGUMENT = \"NULL argument\";\nexport var KEY_NOT_FOUND = \"Key Not Found\";\nexport var AMBIGUOUS_MATCH = \"Ambiguous match found for serviceIdentifier:\";\nexport var CANNOT_UNBIND = \"Could not unbind serviceIdentifier:\";\nexport var NOT_REGISTERED = \"No matching bindings found for serviceIdentifier:\";\nexport var MISSING_INJECTABLE_ANNOTATION = \"Missing required @injectable annotation in:\";\nexport var MISSING_INJECT_ANNOTATION = \"Missing required @inject or @multiInject annotation in:\";\nexport var UNDEFINED_INJECT_ANNOTATION = function (name) {\n    return \"@inject called with undefined this could mean that the class \" + name + \" has \" +\n        \"a circular dependency problem. You can use a LazyServiceIdentifer to  \" +\n        \"overcome this limitation.\";\n};\nexport var CIRCULAR_DEPENDENCY = \"Circular dependency found:\";\nexport var NOT_IMPLEMENTED = \"Sorry, this feature is not fully implemented yet.\";\nexport var INVALID_BINDING_TYPE = \"Invalid binding type:\";\nexport var NO_MORE_SNAPSHOTS_AVAILABLE = \"No snapshot available to restore.\";\nexport var INVALID_MIDDLEWARE_RETURN = \"Invalid return type in middleware. Middleware must return!\";\nexport var INVALID_FUNCTION_BINDING = \"Value provided to function binding must be a function!\";\nexport var INVALID_TO_SELF_VALUE = \"The toSelf function can only be applied when a constructor is \" +\n    \"used as service identifier\";\nexport var INVALID_DECORATOR_OPERATION = \"The @inject @multiInject @tagged and @named decorators \" +\n    \"must be applied to the parameters of a class constructor or a class property.\";\nexport var ARGUMENTS_LENGTH_MISMATCH = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"The number of constructor arguments in the derived class \" +\n        (values[0] + \" must be >= than the number of constructor arguments of its base class.\");\n};\nexport var CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = \"Invalid Container constructor argument. Container options \" +\n    \"must be an object.\";\nexport var CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = \"Invalid Container option. Default scope must \" +\n    \"be a string ('singleton' or 'transient').\";\nexport var CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = \"Invalid Container option. Auto bind injectable must \" +\n    \"be a boolean\";\nexport var CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = \"Invalid Container option. Skip base check must \" +\n    \"be a boolean\";\nexport var MULTIPLE_POST_CONSTRUCT_METHODS = \"Cannot apply @postConstruct decorator multiple times in the same class\";\nexport var POST_CONSTRUCT_ERROR = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"@postConstruct error in class \" + values[0] + \": \" + values[1];\n};\nexport var CIRCULAR_DEPENDENCY_IN_FACTORY = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"It looks like there is a circular dependency \" +\n        (\"in one of the '\" + values[0] + \"' bindings. Please investigate bindings with\") +\n        (\"service identifier '\" + values[1] + \"'.\");\n};\nexport var STACK_OVERFLOW = \"Maximum call stack size exceeded\";\n//# sourceMappingURL=error_msgs.js.map","import * as METADATA_KEY from \"../constants/metadata_keys\";\nvar MetadataReader = (function () {\n    function MetadataReader() {\n    }\n    MetadataReader.prototype.getConstructorMetadata = function (constructorFunc) {\n        var compilerGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.PARAM_TYPES, constructorFunc);\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED, constructorFunc);\n        return {\n            compilerGeneratedMetadata: compilerGeneratedMetadata,\n            userGeneratedMetadata: userGeneratedMetadata || {}\n        };\n    };\n    MetadataReader.prototype.getPropertiesMetadata = function (constructorFunc) {\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED_PROP, constructorFunc) || [];\n        return userGeneratedMetadata;\n    };\n    return MetadataReader;\n}());\nexport { MetadataReader };\n//# sourceMappingURL=metadata_reader.js.map","var BindingCount = {\n    MultipleBindingsAvailable: 2,\n    NoBindingsAvailable: 0,\n    OnlyOneBindingAvailable: 1\n};\nexport { BindingCount };\n//# sourceMappingURL=binding_count.js.map","import * as ERROR_MSGS from \"../constants/error_msgs\";\nexport function isStackOverflowExeption(error) {\n    return (error instanceof RangeError ||\n        error.message === ERROR_MSGS.STACK_OVERFLOW);\n}\n//# sourceMappingURL=exceptions.js.map","import * as ERROR_MSGS from \"../constants/error_msgs\";\nfunction getServiceIdentifierAsString(serviceIdentifier) {\n    if (typeof serviceIdentifier === \"function\") {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier.name;\n    }\n    else if (typeof serviceIdentifier === \"symbol\") {\n        return serviceIdentifier.toString();\n    }\n    else {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier;\n    }\n}\nfunction listRegisteredBindingsForServiceIdentifier(container, serviceIdentifier, getBindings) {\n    var registeredBindingsList = \"\";\n    var registeredBindings = getBindings(container, serviceIdentifier);\n    if (registeredBindings.length !== 0) {\n        registeredBindingsList = \"\\nRegistered bindings:\";\n        registeredBindings.forEach(function (binding) {\n            var name = \"Object\";\n            if (binding.implementationType !== null) {\n                name = getFunctionName(binding.implementationType);\n            }\n            registeredBindingsList = registeredBindingsList + \"\\n \" + name;\n            if (binding.constraint.metaData) {\n                registeredBindingsList = registeredBindingsList + \" - \" + binding.constraint.metaData;\n            }\n        });\n    }\n    return registeredBindingsList;\n}\nfunction alreadyDependencyChain(request, serviceIdentifier) {\n    if (request.parentRequest === null) {\n        return false;\n    }\n    else if (request.parentRequest.serviceIdentifier === serviceIdentifier) {\n        return true;\n    }\n    else {\n        return alreadyDependencyChain(request.parentRequest, serviceIdentifier);\n    }\n}\nfunction dependencyChainToString(request) {\n    function _createStringArr(req, result) {\n        if (result === void 0) { result = []; }\n        var serviceIdentifier = getServiceIdentifierAsString(req.serviceIdentifier);\n        result.push(serviceIdentifier);\n        if (req.parentRequest !== null) {\n            return _createStringArr(req.parentRequest, result);\n        }\n        return result;\n    }\n    var stringArr = _createStringArr(request);\n    return stringArr.reverse().join(\" --> \");\n}\nfunction circularDependencyToException(request) {\n    request.childRequests.forEach(function (childRequest) {\n        if (alreadyDependencyChain(childRequest, childRequest.serviceIdentifier)) {\n            var services = dependencyChainToString(childRequest);\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY + \" \" + services);\n        }\n        else {\n            circularDependencyToException(childRequest);\n        }\n    });\n}\nfunction listMetadataForTarget(serviceIdentifierString, target) {\n    if (target.isTagged() || target.isNamed()) {\n        var m_1 = \"\";\n        var namedTag = target.getNamedTag();\n        var otherTags = target.getCustomTags();\n        if (namedTag !== null) {\n            m_1 += namedTag.toString() + \"\\n\";\n        }\n        if (otherTags !== null) {\n            otherTags.forEach(function (tag) {\n                m_1 += tag.toString() + \"\\n\";\n            });\n        }\n        return \" \" + serviceIdentifierString + \"\\n \" + serviceIdentifierString + \" - \" + m_1;\n    }\n    else {\n        return \" \" + serviceIdentifierString;\n    }\n}\nfunction getFunctionName(v) {\n    if (v.name) {\n        return v.name;\n    }\n    else {\n        var name_1 = v.toString();\n        var match = name_1.match(/^function\\s*([^\\s(]+)/);\n        return match ? match[1] : \"Anonymous function: \" + name_1;\n    }\n}\nexport { getFunctionName, getServiceIdentifierAsString, listRegisteredBindingsForServiceIdentifier, listMetadataForTarget, circularDependencyToException };\n//# sourceMappingURL=serialization.js.map","import { id } from \"../utils/id\";\nvar Context = (function () {\n    function Context(container) {\n        this.id = id();\n        this.container = container;\n    }\n    Context.prototype.addPlan = function (plan) {\n        this.plan = plan;\n    };\n    Context.prototype.setCurrentRequest = function (currentRequest) {\n        this.currentRequest = currentRequest;\n    };\n    return Context;\n}());\nexport { Context };\n//# sourceMappingURL=context.js.map","import * as METADATA_KEY from \"../constants/metadata_keys\";\nvar Metadata = (function () {\n    function Metadata(key, value) {\n        this.key = key;\n        this.value = value;\n    }\n    Metadata.prototype.toString = function () {\n        if (this.key === METADATA_KEY.NAMED_TAG) {\n            return \"named: \" + this.value.toString() + \" \";\n        }\n        else {\n            return \"tagged: { key:\" + this.key.toString() + \", value: \" + this.value + \" }\";\n        }\n    };\n    return Metadata;\n}());\nexport { Metadata };\n//# sourceMappingURL=metadata.js.map","var Plan = (function () {\n    function Plan(parentContext, rootRequest) {\n        this.parentContext = parentContext;\n        this.rootRequest = rootRequest;\n    }\n    return Plan;\n}());\nexport { Plan };\n//# sourceMappingURL=plan.js.map","import * as ERROR_MSGS from \"../constants/error_msgs\";\nimport * as METADATA_KEY from \"../constants/metadata_keys\";\nfunction tagParameter(annotationTarget, propertyName, parameterIndex, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED;\n    _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex);\n}\nfunction tagProperty(annotationTarget, propertyName, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED_PROP;\n    _tagParameterOrProperty(metadataKey, annotationTarget.constructor, propertyName, metadata);\n}\nfunction _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex) {\n    var paramsOrPropertiesMetadata = {};\n    var isParameterDecorator = (typeof parameterIndex === \"number\");\n    var key = (parameterIndex !== undefined && isParameterDecorator) ? parameterIndex.toString() : propertyName;\n    if (isParameterDecorator && propertyName !== undefined) {\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\n    }\n    if (Reflect.hasOwnMetadata(metadataKey, annotationTarget)) {\n        paramsOrPropertiesMetadata = Reflect.getMetadata(metadataKey, annotationTarget);\n    }\n    var paramOrPropertyMetadata = paramsOrPropertiesMetadata[key];\n    if (!Array.isArray(paramOrPropertyMetadata)) {\n        paramOrPropertyMetadata = [];\n    }\n    else {\n        for (var _i = 0, paramOrPropertyMetadata_1 = paramOrPropertyMetadata; _i < paramOrPropertyMetadata_1.length; _i++) {\n            var m = paramOrPropertyMetadata_1[_i];\n            if (m.key === metadata.key) {\n                throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + m.key.toString());\n            }\n        }\n    }\n    paramOrPropertyMetadata.push(metadata);\n    paramsOrPropertiesMetadata[key] = paramOrPropertyMetadata;\n    Reflect.defineMetadata(metadataKey, paramsOrPropertiesMetadata, annotationTarget);\n}\nfunction _decorate(decorators, target) {\n    Reflect.decorate(decorators, target);\n}\nfunction _param(paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); };\n}\nfunction decorate(decorator, target, parameterIndex) {\n    if (typeof parameterIndex === \"number\") {\n        _decorate([_param(parameterIndex, decorator)], target);\n    }\n    else if (typeof parameterIndex === \"string\") {\n        Reflect.decorate([decorator], target, parameterIndex);\n    }\n    else {\n        _decorate([decorator], target);\n    }\n}\nexport { decorate, tagParameter, tagProperty };\n//# sourceMappingURL=decorator_utils.js.map","import { UNDEFINED_INJECT_ANNOTATION } from \"../constants/error_msgs\";\nimport * as METADATA_KEY from \"../constants/metadata_keys\";\nimport { Metadata } from \"../planning/metadata\";\nimport { tagParameter, tagProperty } from \"./decorator_utils\";\nvar LazyServiceIdentifer = (function () {\n    function LazyServiceIdentifer(cb) {\n        this._cb = cb;\n    }\n    LazyServiceIdentifer.prototype.unwrap = function () {\n        return this._cb();\n    };\n    return LazyServiceIdentifer;\n}());\nexport { LazyServiceIdentifer };\nfunction inject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        if (serviceIdentifier === undefined) {\n            throw new Error(UNDEFINED_INJECT_ANNOTATION(target.name));\n        }\n        var metadata = new Metadata(METADATA_KEY.INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexport { inject };\n//# sourceMappingURL=inject.js.map","var QueryableString = (function () {\n    function QueryableString(str) {\n        this.str = str;\n    }\n    QueryableString.prototype.startsWith = function (searchString) {\n        return this.str.indexOf(searchString) === 0;\n    };\n    QueryableString.prototype.endsWith = function (searchString) {\n        var reverseString = \"\";\n        var reverseSearchString = searchString.split(\"\").reverse().join(\"\");\n        reverseString = this.str.split(\"\").reverse().join(\"\");\n        return this.startsWith.call({ str: reverseString }, reverseSearchString);\n    };\n    QueryableString.prototype.contains = function (searchString) {\n        return (this.str.indexOf(searchString) !== -1);\n    };\n    QueryableString.prototype.equals = function (compareString) {\n        return this.str === compareString;\n    };\n    QueryableString.prototype.value = function () {\n        return this.str;\n    };\n    return QueryableString;\n}());\nexport { QueryableString };\n//# sourceMappingURL=queryable_string.js.map","import * as METADATA_KEY from \"../constants/metadata_keys\";\nimport { id } from \"../utils/id\";\nimport { Metadata } from \"./metadata\";\nimport { QueryableString } from \"./queryable_string\";\nvar Target = (function () {\n    function Target(type, name, serviceIdentifier, namedOrTagged) {\n        this.id = id();\n        this.type = type;\n        this.serviceIdentifier = serviceIdentifier;\n        this.name = new QueryableString(name || \"\");\n        this.metadata = new Array();\n        var metadataItem = null;\n        if (typeof namedOrTagged === \"string\") {\n            metadataItem = new Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n        }\n        else if (namedOrTagged instanceof Metadata) {\n            metadataItem = namedOrTagged;\n        }\n        if (metadataItem !== null) {\n            this.metadata.push(metadataItem);\n        }\n    }\n    Target.prototype.hasTag = function (key) {\n        for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\n            var m = _a[_i];\n            if (m.key === key) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Target.prototype.isArray = function () {\n        return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n    };\n    Target.prototype.matchesArray = function (name) {\n        return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n    };\n    Target.prototype.isNamed = function () {\n        return this.hasTag(METADATA_KEY.NAMED_TAG);\n    };\n    Target.prototype.isTagged = function () {\n        return this.metadata.some(function (metadata) { return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) { return metadata.key !== key; }); });\n    };\n    Target.prototype.isOptional = function () {\n        return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n    };\n    Target.prototype.getNamedTag = function () {\n        if (this.isNamed()) {\n            return this.metadata.filter(function (m) { return m.key === METADATA_KEY.NAMED_TAG; })[0];\n        }\n        return null;\n    };\n    Target.prototype.getCustomTags = function () {\n        if (this.isTagged()) {\n            return this.metadata.filter(function (metadata) { return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) { return metadata.key !== key; }); });\n        }\n        else {\n            return null;\n        }\n    };\n    Target.prototype.matchesNamedTag = function (name) {\n        return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n    };\n    Target.prototype.matchesTag = function (key) {\n        var _this = this;\n        return function (value) {\n            for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\n                var m = _a[_i];\n                if (m.key === key && m.value === value) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n    return Target;\n}());\nexport { Target };\n//# sourceMappingURL=target.js.map","var __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nimport { LazyServiceIdentifer } from \"../annotation/inject\";\nimport * as ERROR_MSGS from \"../constants/error_msgs\";\nimport { TargetTypeEnum } from \"../constants/literal_types\";\nimport * as METADATA_KEY from \"../constants/metadata_keys\";\nimport { getFunctionName } from \"../utils/serialization\";\nimport { Target } from \"./target\";\nfunction getDependencies(metadataReader, func) {\n    var constructorName = getFunctionName(func);\n    var targets = getTargets(metadataReader, constructorName, func, false);\n    return targets;\n}\nfunction getTargets(metadataReader, constructorName, func, isBaseClass) {\n    var metadata = metadataReader.getConstructorMetadata(func);\n    var serviceIdentifiers = metadata.compilerGeneratedMetadata;\n    if (serviceIdentifiers === undefined) {\n        var msg = ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION + \" \" + constructorName + \".\";\n        throw new Error(msg);\n    }\n    var constructorArgsMetadata = metadata.userGeneratedMetadata;\n    var keys = Object.keys(constructorArgsMetadata);\n    var hasUserDeclaredUnknownInjections = (func.length === 0 && keys.length > 0);\n    var hasOptionalParameters = keys.length > func.length;\n    var iterations = (hasUserDeclaredUnknownInjections || hasOptionalParameters) ? keys.length : func.length;\n    var constructorTargets = getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations);\n    var propertyTargets = getClassPropsAsTargets(metadataReader, func);\n    var targets = __spreadArray(__spreadArray([], constructorTargets), propertyTargets);\n    return targets;\n}\nfunction getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata) {\n    var targetMetadata = constructorArgsMetadata[index.toString()] || [];\n    var metadata = formatTargetMetadata(targetMetadata);\n    var isManaged = metadata.unmanaged !== true;\n    var serviceIdentifier = serviceIdentifiers[index];\n    var injectIdentifier = (metadata.inject || metadata.multiInject);\n    serviceIdentifier = (injectIdentifier) ? (injectIdentifier) : serviceIdentifier;\n    if (serviceIdentifier instanceof LazyServiceIdentifer) {\n        serviceIdentifier = serviceIdentifier.unwrap();\n    }\n    if (isManaged) {\n        var isObject = serviceIdentifier === Object;\n        var isFunction = serviceIdentifier === Function;\n        var isUndefined = serviceIdentifier === undefined;\n        var isUnknownType = (isObject || isFunction || isUndefined);\n        if (!isBaseClass && isUnknownType) {\n            var msg = ERROR_MSGS.MISSING_INJECT_ANNOTATION + \" argument \" + index + \" in class \" + constructorName + \".\";\n            throw new Error(msg);\n        }\n        var target = new Target(TargetTypeEnum.ConstructorArgument, metadata.targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        return target;\n    }\n    return null;\n}\nfunction getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations) {\n    var targets = [];\n    for (var i = 0; i < iterations; i++) {\n        var index = i;\n        var target = getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata);\n        if (target !== null) {\n            targets.push(target);\n        }\n    }\n    return targets;\n}\nfunction getClassPropsAsTargets(metadataReader, constructorFunc) {\n    var classPropsMetadata = metadataReader.getPropertiesMetadata(constructorFunc);\n    var targets = [];\n    var keys = Object.keys(classPropsMetadata);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        var targetMetadata = classPropsMetadata[key];\n        var metadata = formatTargetMetadata(classPropsMetadata[key]);\n        var targetName = metadata.targetName || key;\n        var serviceIdentifier = (metadata.inject || metadata.multiInject);\n        var target = new Target(TargetTypeEnum.ClassProperty, targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        targets.push(target);\n    }\n    var baseConstructor = Object.getPrototypeOf(constructorFunc.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseTargets = getClassPropsAsTargets(metadataReader, baseConstructor);\n        targets = __spreadArray(__spreadArray([], targets), baseTargets);\n    }\n    return targets;\n}\nfunction getBaseClassDependencyCount(metadataReader, func) {\n    var baseConstructor = Object.getPrototypeOf(func.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseConstructorName = getFunctionName(baseConstructor);\n        var targets = getTargets(metadataReader, baseConstructorName, baseConstructor, true);\n        var metadata = targets.map(function (t) {\n            return t.metadata.filter(function (m) {\n                return m.key === METADATA_KEY.UNMANAGED_TAG;\n            });\n        });\n        var unmanagedCount = [].concat.apply([], metadata).length;\n        var dependencyCount = targets.length - unmanagedCount;\n        if (dependencyCount > 0) {\n            return dependencyCount;\n        }\n        else {\n            return getBaseClassDependencyCount(metadataReader, baseConstructor);\n        }\n    }\n    else {\n        return 0;\n    }\n}\nfunction formatTargetMetadata(targetMetadata) {\n    var targetMetadataMap = {};\n    targetMetadata.forEach(function (m) {\n        targetMetadataMap[m.key.toString()] = m.value;\n    });\n    return {\n        inject: targetMetadataMap[METADATA_KEY.INJECT_TAG],\n        multiInject: targetMetadataMap[METADATA_KEY.MULTI_INJECT_TAG],\n        targetName: targetMetadataMap[METADATA_KEY.NAME_TAG],\n        unmanaged: targetMetadataMap[METADATA_KEY.UNMANAGED_TAG]\n    };\n}\nexport { getDependencies, getBaseClassDependencyCount, getFunctionName };\n//# sourceMappingURL=reflection_utils.js.map","import { id } from \"../utils/id\";\nvar Request = (function () {\n    function Request(serviceIdentifier, parentContext, parentRequest, bindings, target) {\n        this.id = id();\n        this.serviceIdentifier = serviceIdentifier;\n        this.parentContext = parentContext;\n        this.parentRequest = parentRequest;\n        this.target = target;\n        this.childRequests = [];\n        this.bindings = (Array.isArray(bindings) ? bindings : [bindings]);\n        this.requestScope = parentRequest === null\n            ? new Map()\n            : null;\n    }\n    Request.prototype.addChildRequest = function (serviceIdentifier, bindings, target) {\n        var child = new Request(serviceIdentifier, this.parentContext, this, bindings, target);\n        this.childRequests.push(child);\n        return child;\n    };\n    return Request;\n}());\nexport { Request };\n//# sourceMappingURL=request.js.map","import { BindingCount } from \"../bindings/binding_count\";\nimport * as ERROR_MSGS from \"../constants/error_msgs\";\nimport { BindingTypeEnum, TargetTypeEnum } from \"../constants/literal_types\";\nimport * as METADATA_KEY from \"../constants/metadata_keys\";\nimport { isStackOverflowExeption } from \"../utils/exceptions\";\nimport { circularDependencyToException, getServiceIdentifierAsString, listMetadataForTarget, listRegisteredBindingsForServiceIdentifier } from \"../utils/serialization\";\nimport { Context } from \"./context\";\nimport { Metadata } from \"./metadata\";\nimport { Plan } from \"./plan\";\nimport { getBaseClassDependencyCount, getDependencies, getFunctionName } from \"./reflection_utils\";\nimport { Request } from \"./request\";\nimport { Target } from \"./target\";\nfunction getBindingDictionary(cntnr) {\n    return cntnr._bindingDictionary;\n}\nfunction _createTarget(isMultiInject, targetType, serviceIdentifier, name, key, value) {\n    var metadataKey = isMultiInject ? METADATA_KEY.MULTI_INJECT_TAG : METADATA_KEY.INJECT_TAG;\n    var injectMetadata = new Metadata(metadataKey, serviceIdentifier);\n    var target = new Target(targetType, name, serviceIdentifier, injectMetadata);\n    if (key !== undefined) {\n        var tagMetadata = new Metadata(key, value);\n        target.metadata.push(tagMetadata);\n    }\n    return target;\n}\nfunction _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target) {\n    var bindings = getBindings(context.container, target.serviceIdentifier);\n    var activeBindings = [];\n    if (bindings.length === BindingCount.NoBindingsAvailable &&\n        context.container.options.autoBindInjectable &&\n        typeof target.serviceIdentifier === \"function\" &&\n        metadataReader.getConstructorMetadata(target.serviceIdentifier).compilerGeneratedMetadata) {\n        context.container.bind(target.serviceIdentifier).toSelf();\n        bindings = getBindings(context.container, target.serviceIdentifier);\n    }\n    if (!avoidConstraints) {\n        activeBindings = bindings.filter(function (binding) {\n            var request = new Request(binding.serviceIdentifier, context, parentRequest, binding, target);\n            return binding.constraint(request);\n        });\n    }\n    else {\n        activeBindings = bindings;\n    }\n    _validateActiveBindingCount(target.serviceIdentifier, activeBindings, target, context.container);\n    return activeBindings;\n}\nfunction _validateActiveBindingCount(serviceIdentifier, bindings, target, container) {\n    switch (bindings.length) {\n        case BindingCount.NoBindingsAvailable:\n            if (target.isOptional()) {\n                return bindings;\n            }\n            else {\n                var serviceIdentifierString = getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.NOT_REGISTERED;\n                msg += listMetadataForTarget(serviceIdentifierString, target);\n                msg += listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n        case BindingCount.OnlyOneBindingAvailable:\n            if (!target.isArray()) {\n                return bindings;\n            }\n        case BindingCount.MultipleBindingsAvailable:\n        default:\n            if (!target.isArray()) {\n                var serviceIdentifierString = getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.AMBIGUOUS_MATCH + \" \" + serviceIdentifierString;\n                msg += listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n            else {\n                return bindings;\n            }\n    }\n}\nfunction _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, parentRequest, target) {\n    var activeBindings;\n    var childRequest;\n    if (parentRequest === null) {\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, null, target);\n        childRequest = new Request(serviceIdentifier, context, null, activeBindings, target);\n        var thePlan = new Plan(context, childRequest);\n        context.addPlan(thePlan);\n    }\n    else {\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target);\n        childRequest = parentRequest.addChildRequest(target.serviceIdentifier, activeBindings, target);\n    }\n    activeBindings.forEach(function (binding) {\n        var subChildRequest = null;\n        if (target.isArray()) {\n            subChildRequest = childRequest.addChildRequest(binding.serviceIdentifier, binding, target);\n        }\n        else {\n            if (binding.cache) {\n                return;\n            }\n            subChildRequest = childRequest;\n        }\n        if (binding.type === BindingTypeEnum.Instance && binding.implementationType !== null) {\n            var dependencies = getDependencies(metadataReader, binding.implementationType);\n            if (!context.container.options.skipBaseClassChecks) {\n                var baseClassDependencyCount = getBaseClassDependencyCount(metadataReader, binding.implementationType);\n                if (dependencies.length < baseClassDependencyCount) {\n                    var error = ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH(getFunctionName(binding.implementationType));\n                    throw new Error(error);\n                }\n            }\n            dependencies.forEach(function (dependency) {\n                _createSubRequests(metadataReader, false, dependency.serviceIdentifier, context, subChildRequest, dependency);\n            });\n        }\n    });\n}\nfunction getBindings(container, serviceIdentifier) {\n    var bindings = [];\n    var bindingDictionary = getBindingDictionary(container);\n    if (bindingDictionary.hasKey(serviceIdentifier)) {\n        bindings = bindingDictionary.get(serviceIdentifier);\n    }\n    else if (container.parent !== null) {\n        bindings = getBindings(container.parent, serviceIdentifier);\n    }\n    return bindings;\n}\nfunction plan(metadataReader, container, isMultiInject, targetType, serviceIdentifier, key, value, avoidConstraints) {\n    if (avoidConstraints === void 0) { avoidConstraints = false; }\n    var context = new Context(container);\n    var target = _createTarget(isMultiInject, targetType, serviceIdentifier, \"\", key, value);\n    try {\n        _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, null, target);\n        return context;\n    }\n    catch (error) {\n        if (isStackOverflowExeption(error)) {\n            if (context.plan) {\n                circularDependencyToException(context.plan.rootRequest);\n            }\n        }\n        throw error;\n    }\n}\nfunction createMockRequest(container, serviceIdentifier, key, value) {\n    var target = new Target(TargetTypeEnum.Variable, \"\", serviceIdentifier, new Metadata(key, value));\n    var context = new Context(container);\n    var request = new Request(serviceIdentifier, context, null, [], target);\n    return request;\n}\nexport { plan, createMockRequest, getBindingDictionary };\n//# sourceMappingURL=planner.js.map","var __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nimport { POST_CONSTRUCT_ERROR } from \"../constants/error_msgs\";\nimport { TargetTypeEnum } from \"../constants/literal_types\";\nimport * as METADATA_KEY from \"../constants/metadata_keys\";\nfunction _injectProperties(instance, childRequests, resolveRequest) {\n    var propertyInjectionsRequests = childRequests.filter(function (childRequest) {\n        return (childRequest.target !== null &&\n            childRequest.target.type === TargetTypeEnum.ClassProperty);\n    });\n    var propertyInjections = propertyInjectionsRequests.map(resolveRequest);\n    propertyInjectionsRequests.forEach(function (r, index) {\n        var propertyName = \"\";\n        propertyName = r.target.name.value();\n        var injection = propertyInjections[index];\n        instance[propertyName] = injection;\n    });\n    return instance;\n}\nfunction _createInstance(Func, injections) {\n    return new (Func.bind.apply(Func, __spreadArray([void 0], injections)))();\n}\nfunction _postConstruct(constr, result) {\n    if (Reflect.hasMetadata(METADATA_KEY.POST_CONSTRUCT, constr)) {\n        var data = Reflect.getMetadata(METADATA_KEY.POST_CONSTRUCT, constr);\n        try {\n            result[data.value]();\n        }\n        catch (e) {\n            throw new Error(POST_CONSTRUCT_ERROR(constr.name, e.message));\n        }\n    }\n}\nfunction resolveInstance(constr, childRequests, resolveRequest) {\n    var result = null;\n    if (childRequests.length > 0) {\n        var constructorInjectionsRequests = childRequests.filter(function (childRequest) {\n            return (childRequest.target !== null && childRequest.target.type === TargetTypeEnum.ConstructorArgument);\n        });\n        var constructorInjections = constructorInjectionsRequests.map(resolveRequest);\n        result = _createInstance(constr, constructorInjections);\n        result = _injectProperties(result, childRequests, resolveRequest);\n    }\n    else {\n        result = new constr();\n    }\n    _postConstruct(constr, result);\n    return result;\n}\nexport { resolveInstance };\n//# sourceMappingURL=instantiation.js.map","import * as ERROR_MSGS from \"../constants/error_msgs\";\nimport { BindingScopeEnum, BindingTypeEnum } from \"../constants/literal_types\";\nimport { isStackOverflowExeption } from \"../utils/exceptions\";\nimport { getServiceIdentifierAsString } from \"../utils/serialization\";\nimport { resolveInstance } from \"./instantiation\";\nvar invokeFactory = function (factoryType, serviceIdentifier, fn) {\n    try {\n        return fn();\n    }\n    catch (error) {\n        if (isStackOverflowExeption(error)) {\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY_IN_FACTORY(factoryType, serviceIdentifier.toString()));\n        }\n        else {\n            throw error;\n        }\n    }\n};\nvar _resolveRequest = function (requestScope) {\n    return function (request) {\n        request.parentContext.setCurrentRequest(request);\n        var bindings = request.bindings;\n        var childRequests = request.childRequests;\n        var targetIsAnArray = request.target && request.target.isArray();\n        var targetParentIsNotAnArray = !request.parentRequest ||\n            !request.parentRequest.target ||\n            !request.target ||\n            !request.parentRequest.target.matchesArray(request.target.serviceIdentifier);\n        if (targetIsAnArray && targetParentIsNotAnArray) {\n            return childRequests.map(function (childRequest) {\n                var _f = _resolveRequest(requestScope);\n                return _f(childRequest);\n            });\n        }\n        else {\n            var result = null;\n            if (request.target.isOptional() && bindings.length === 0) {\n                return undefined;\n            }\n            var binding_1 = bindings[0];\n            var isSingleton = binding_1.scope === BindingScopeEnum.Singleton;\n            var isRequestSingleton = binding_1.scope === BindingScopeEnum.Request;\n            if (isSingleton && binding_1.activated) {\n                return binding_1.cache;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                requestScope.has(binding_1.id)) {\n                return requestScope.get(binding_1.id);\n            }\n            if (binding_1.type === BindingTypeEnum.ConstantValue) {\n                result = binding_1.cache;\n                binding_1.activated = true;\n            }\n            else if (binding_1.type === BindingTypeEnum.Function) {\n                result = binding_1.cache;\n                binding_1.activated = true;\n            }\n            else if (binding_1.type === BindingTypeEnum.Constructor) {\n                result = binding_1.implementationType;\n            }\n            else if (binding_1.type === BindingTypeEnum.DynamicValue && binding_1.dynamicValue !== null) {\n                result = invokeFactory(\"toDynamicValue\", binding_1.serviceIdentifier, function () { return binding_1.dynamicValue(request.parentContext); });\n            }\n            else if (binding_1.type === BindingTypeEnum.Factory && binding_1.factory !== null) {\n                result = invokeFactory(\"toFactory\", binding_1.serviceIdentifier, function () { return binding_1.factory(request.parentContext); });\n            }\n            else if (binding_1.type === BindingTypeEnum.Provider && binding_1.provider !== null) {\n                result = invokeFactory(\"toProvider\", binding_1.serviceIdentifier, function () { return binding_1.provider(request.parentContext); });\n            }\n            else if (binding_1.type === BindingTypeEnum.Instance && binding_1.implementationType !== null) {\n                result = resolveInstance(binding_1.implementationType, childRequests, _resolveRequest(requestScope));\n            }\n            else {\n                var serviceIdentifier = getServiceIdentifierAsString(request.serviceIdentifier);\n                throw new Error(ERROR_MSGS.INVALID_BINDING_TYPE + \" \" + serviceIdentifier);\n            }\n            if (typeof binding_1.onActivation === \"function\") {\n                result = binding_1.onActivation(request.parentContext, result);\n            }\n            if (isSingleton) {\n                binding_1.cache = result;\n                binding_1.activated = true;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                !requestScope.has(binding_1.id)) {\n                requestScope.set(binding_1.id, result);\n            }\n            return result;\n        }\n    };\n};\nfunction resolve(context) {\n    var _f = _resolveRequest(context.plan.rootRequest.requestScope);\n    return _f(context.plan.rootRequest);\n}\nexport { resolve };\n//# sourceMappingURL=resolver.js.map","import * as METADATA_KEY from \"../constants/metadata_keys\";\nimport { Metadata } from \"../planning/metadata\";\nvar traverseAncerstors = function (request, constraint) {\n    var parent = request.parentRequest;\n    if (parent !== null) {\n        return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n    }\n    else {\n        return false;\n    }\n};\nvar taggedConstraint = function (key) { return function (value) {\n    var constraint = function (request) {\n        return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n    constraint.metaData = new Metadata(key, value);\n    return constraint;\n}; };\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nvar typeConstraint = function (type) { return function (request) {\n    var binding = null;\n    if (request !== null) {\n        binding = request.bindings[0];\n        if (typeof type === \"string\") {\n            var serviceIdentifier = binding.serviceIdentifier;\n            return serviceIdentifier === type;\n        }\n        else {\n            var constructor = request.bindings[0].implementationType;\n            return type === constructor;\n        }\n    }\n    return false;\n}; };\nexport { traverseAncerstors, taggedConstraint, namedConstraint, typeConstraint };\n//# sourceMappingURL=constraint_helpers.js.map","import { BindingOnSyntax } from \"./binding_on_syntax\";\nimport { namedConstraint, taggedConstraint, traverseAncerstors, typeConstraint } from \"./constraint_helpers\";\nvar BindingWhenSyntax = (function () {\n    function BindingWhenSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingWhenSyntax.prototype.when = function (constraint) {\n        this._binding.constraint = constraint;\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetNamed = function (name) {\n        this._binding.constraint = namedConstraint(name);\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetIsDefault = function () {\n        this._binding.constraint = function (request) {\n            var targetIsDefault = (request.target !== null) &&\n                (!request.target.isNamed()) &&\n                (!request.target.isTagged());\n            return targetIsDefault;\n        };\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetTagged = function (tag, value) {\n        this._binding.constraint = taggedConstraint(tag)(value);\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenInjectedInto = function (parent) {\n        this._binding.constraint = function (request) {\n            return typeConstraint(parent)(request.parentRequest);\n        };\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return namedConstraint(name)(request.parentRequest);\n        };\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return taggedConstraint(tag)(value)(request.parentRequest);\n        };\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return traverseAncerstors(request, typeConstraint(ancestor));\n        };\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return !traverseAncerstors(request, typeConstraint(ancestor));\n        };\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return traverseAncerstors(request, namedConstraint(name));\n        };\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return !traverseAncerstors(request, namedConstraint(name));\n        };\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return traverseAncerstors(request, taggedConstraint(tag)(value));\n        };\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return !traverseAncerstors(request, taggedConstraint(tag)(value));\n        };\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return traverseAncerstors(request, constraint);\n        };\n        return new BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return !traverseAncerstors(request, constraint);\n        };\n        return new BindingOnSyntax(this._binding);\n    };\n    return BindingWhenSyntax;\n}());\nexport { BindingWhenSyntax };\n//# sourceMappingURL=binding_when_syntax.js.map","import { BindingWhenSyntax } from \"./binding_when_syntax\";\nvar BindingOnSyntax = (function () {\n    function BindingOnSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingOnSyntax.prototype.onActivation = function (handler) {\n        this._binding.onActivation = handler;\n        return new BindingWhenSyntax(this._binding);\n    };\n    return BindingOnSyntax;\n}());\nexport { BindingOnSyntax };\n//# sourceMappingURL=binding_on_syntax.js.map","import { BindingOnSyntax } from \"./binding_on_syntax\";\nimport { BindingWhenSyntax } from \"./binding_when_syntax\";\nvar BindingWhenOnSyntax = (function () {\n    function BindingWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new BindingOnSyntax(this._binding);\n    }\n    BindingWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingWhenOnSyntax;\n}());\nexport { BindingWhenOnSyntax };\n//# sourceMappingURL=binding_when_on_syntax.js.map","import { BindingScopeEnum } from \"../constants/literal_types\";\nimport { BindingWhenOnSyntax } from \"./binding_when_on_syntax\";\nvar BindingInSyntax = (function () {\n    function BindingInSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingInSyntax.prototype.inRequestScope = function () {\n        this._binding.scope = BindingScopeEnum.Request;\n        return new BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inSingletonScope = function () {\n        this._binding.scope = BindingScopeEnum.Singleton;\n        return new BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inTransientScope = function () {\n        this._binding.scope = BindingScopeEnum.Transient;\n        return new BindingWhenOnSyntax(this._binding);\n    };\n    return BindingInSyntax;\n}());\nexport { BindingInSyntax };\n//# sourceMappingURL=binding_in_syntax.js.map","import { BindingInSyntax } from \"./binding_in_syntax\";\nimport { BindingOnSyntax } from \"./binding_on_syntax\";\nimport { BindingWhenSyntax } from \"./binding_when_syntax\";\nvar BindingInWhenOnSyntax = (function () {\n    function BindingInWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new BindingOnSyntax(this._binding);\n        this._bindingInSyntax = new BindingInSyntax(binding);\n    }\n    BindingInWhenOnSyntax.prototype.inRequestScope = function () {\n        return this._bindingInSyntax.inRequestScope();\n    };\n    BindingInWhenOnSyntax.prototype.inSingletonScope = function () {\n        return this._bindingInSyntax.inSingletonScope();\n    };\n    BindingInWhenOnSyntax.prototype.inTransientScope = function () {\n        return this._bindingInSyntax.inTransientScope();\n    };\n    BindingInWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingInWhenOnSyntax;\n}());\nexport { BindingInWhenOnSyntax };\n//# sourceMappingURL=binding_in_when_on_syntax.js.map","import * as ERROR_MSGS from \"../constants/error_msgs\";\nimport { BindingScopeEnum, BindingTypeEnum } from \"../constants/literal_types\";\nimport { BindingInWhenOnSyntax } from \"./binding_in_when_on_syntax\";\nimport { BindingWhenOnSyntax } from \"./binding_when_on_syntax\";\nvar BindingToSyntax = (function () {\n    function BindingToSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingToSyntax.prototype.to = function (constructor) {\n        this._binding.type = BindingTypeEnum.Instance;\n        this._binding.implementationType = constructor;\n        return new BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toSelf = function () {\n        if (typeof this._binding.serviceIdentifier !== \"function\") {\n            throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\n        }\n        var self = this._binding.serviceIdentifier;\n        return this.to(self);\n    };\n    BindingToSyntax.prototype.toConstantValue = function (value) {\n        this._binding.type = BindingTypeEnum.ConstantValue;\n        this._binding.cache = value;\n        this._binding.dynamicValue = null;\n        this._binding.implementationType = null;\n        this._binding.scope = BindingScopeEnum.Singleton;\n        return new BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toDynamicValue = function (func) {\n        this._binding.type = BindingTypeEnum.DynamicValue;\n        this._binding.cache = null;\n        this._binding.dynamicValue = func;\n        this._binding.implementationType = null;\n        return new BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toConstructor = function (constructor) {\n        this._binding.type = BindingTypeEnum.Constructor;\n        this._binding.implementationType = constructor;\n        this._binding.scope = BindingScopeEnum.Singleton;\n        return new BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFactory = function (factory) {\n        this._binding.type = BindingTypeEnum.Factory;\n        this._binding.factory = factory;\n        this._binding.scope = BindingScopeEnum.Singleton;\n        return new BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFunction = function (func) {\n        if (typeof func !== \"function\") {\n            throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\n        }\n        var bindingWhenOnSyntax = this.toConstantValue(func);\n        this._binding.type = BindingTypeEnum.Function;\n        this._binding.scope = BindingScopeEnum.Singleton;\n        return bindingWhenOnSyntax;\n    };\n    BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\n        this._binding.type = BindingTypeEnum.Factory;\n        this._binding.factory = function (context) {\n            var autofactory = function () { return context.container.get(serviceIdentifier); };\n            return autofactory;\n        };\n        this._binding.scope = BindingScopeEnum.Singleton;\n        return new BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toProvider = function (provider) {\n        this._binding.type = BindingTypeEnum.Provider;\n        this._binding.provider = provider;\n        this._binding.scope = BindingScopeEnum.Singleton;\n        return new BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toService = function (service) {\n        this.toDynamicValue(function (context) { return context.container.get(service); });\n    };\n    return BindingToSyntax;\n}());\nexport { BindingToSyntax };\n//# sourceMappingURL=binding_to_syntax.js.map","var ContainerSnapshot = (function () {\n    function ContainerSnapshot() {\n    }\n    ContainerSnapshot.of = function (bindings, middleware) {\n        var snapshot = new ContainerSnapshot();\n        snapshot.bindings = bindings;\n        snapshot.middleware = middleware;\n        return snapshot;\n    };\n    return ContainerSnapshot;\n}());\nexport { ContainerSnapshot };\n//# sourceMappingURL=container_snapshot.js.map","import * as ERROR_MSGS from \"../constants/error_msgs\";\nvar Lookup = (function () {\n    function Lookup() {\n        this._map = new Map();\n    }\n    Lookup.prototype.getMap = function () {\n        return this._map;\n    };\n    Lookup.prototype.add = function (serviceIdentifier, value) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (value === null || value === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            entry.push(value);\n            this._map.set(serviceIdentifier, entry);\n        }\n        else {\n            this._map.set(serviceIdentifier, [value]);\n        }\n    };\n    Lookup.prototype.get = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            return entry;\n        }\n        else {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.remove = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (!this._map.delete(serviceIdentifier)) {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.removeByCondition = function (condition) {\n        var _this = this;\n        this._map.forEach(function (entries, key) {\n            var updatedEntries = entries.filter(function (entry) { return !condition(entry); });\n            if (updatedEntries.length > 0) {\n                _this._map.set(key, updatedEntries);\n            }\n            else {\n                _this._map.delete(key);\n            }\n        });\n    };\n    Lookup.prototype.hasKey = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        return this._map.has(serviceIdentifier);\n    };\n    Lookup.prototype.clone = function () {\n        var copy = new Lookup();\n        this._map.forEach(function (value, key) {\n            value.forEach(function (b) { return copy.add(key, b.clone()); });\n        });\n        return copy;\n    };\n    Lookup.prototype.traverse = function (func) {\n        this._map.forEach(function (value, key) {\n            func(key, value);\n        });\n    };\n    return Lookup;\n}());\nexport { Lookup };\n//# sourceMappingURL=lookup.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nimport { Binding } from \"../bindings/binding\";\nimport * as ERROR_MSGS from \"../constants/error_msgs\";\nimport { BindingScopeEnum, TargetTypeEnum } from \"../constants/literal_types\";\nimport * as METADATA_KEY from \"../constants/metadata_keys\";\nimport { MetadataReader } from \"../planning/metadata_reader\";\nimport { createMockRequest, getBindingDictionary, plan } from \"../planning/planner\";\nimport { resolve } from \"../resolution/resolver\";\nimport { BindingToSyntax } from \"../syntax/binding_to_syntax\";\nimport { id } from \"../utils/id\";\nimport { getServiceIdentifierAsString } from \"../utils/serialization\";\nimport { ContainerSnapshot } from \"./container_snapshot\";\nimport { Lookup } from \"./lookup\";\nvar Container = (function () {\n    function Container(containerOptions) {\n        this._appliedMiddleware = [];\n        var options = containerOptions || {};\n        if (typeof options !== \"object\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);\n        }\n        if (options.defaultScope === undefined) {\n            options.defaultScope = BindingScopeEnum.Transient;\n        }\n        else if (options.defaultScope !== BindingScopeEnum.Singleton &&\n            options.defaultScope !== BindingScopeEnum.Transient &&\n            options.defaultScope !== BindingScopeEnum.Request) {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\n        }\n        if (options.autoBindInjectable === undefined) {\n            options.autoBindInjectable = false;\n        }\n        else if (typeof options.autoBindInjectable !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);\n        }\n        if (options.skipBaseClassChecks === undefined) {\n            options.skipBaseClassChecks = false;\n        }\n        else if (typeof options.skipBaseClassChecks !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);\n        }\n        this.options = {\n            autoBindInjectable: options.autoBindInjectable,\n            defaultScope: options.defaultScope,\n            skipBaseClassChecks: options.skipBaseClassChecks\n        };\n        this.id = id();\n        this._bindingDictionary = new Lookup();\n        this._snapshots = [];\n        this._middleware = null;\n        this.parent = null;\n        this._metadataReader = new MetadataReader();\n    }\n    Container.merge = function (container1, container2) {\n        var container3 = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            container3[_i - 2] = arguments[_i];\n        }\n        var container = new Container();\n        var targetContainers = __spreadArray([container1, container2], container3).map(function (targetContainer) { return getBindingDictionary(targetContainer); });\n        var bindingDictionary = getBindingDictionary(container);\n        function copyDictionary(origin, destination) {\n            origin.traverse(function (key, value) {\n                value.forEach(function (binding) {\n                    destination.add(binding.serviceIdentifier, binding.clone());\n                });\n            });\n        }\n        targetContainers.forEach(function (targetBindingDictionary) {\n            copyDictionary(targetBindingDictionary, bindingDictionary);\n        });\n        return container;\n    };\n    Container.prototype.load = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var getHelpers = this._getContainerModuleHelpersFactory();\n        for (var _a = 0, modules_1 = modules; _a < modules_1.length; _a++) {\n            var currentModule = modules_1[_a];\n            var containerModuleHelpers = getHelpers(currentModule.id);\n            currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction);\n        }\n    };\n    Container.prototype.loadAsync = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var getHelpers, _a, modules_2, currentModule, containerModuleHelpers;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        getHelpers = this._getContainerModuleHelpersFactory();\n                        _a = 0, modules_2 = modules;\n                        _b.label = 1;\n                    case 1:\n                        if (!(_a < modules_2.length)) return [3, 4];\n                        currentModule = modules_2[_a];\n                        containerModuleHelpers = getHelpers(currentModule.id);\n                        return [4, currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction)];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        _a++;\n                        return [3, 1];\n                    case 4: return [2];\n                }\n            });\n        });\n    };\n    Container.prototype.unload = function () {\n        var _this = this;\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var conditionFactory = function (expected) { return function (item) {\n            return item.moduleId === expected;\n        }; };\n        modules.forEach(function (module) {\n            var condition = conditionFactory(module.id);\n            _this._bindingDictionary.removeByCondition(condition);\n        });\n    };\n    Container.prototype.bind = function (serviceIdentifier) {\n        var scope = this.options.defaultScope || BindingScopeEnum.Transient;\n        var binding = new Binding(serviceIdentifier, scope);\n        this._bindingDictionary.add(serviceIdentifier, binding);\n        return new BindingToSyntax(binding);\n    };\n    Container.prototype.rebind = function (serviceIdentifier) {\n        this.unbind(serviceIdentifier);\n        return this.bind(serviceIdentifier);\n    };\n    Container.prototype.unbind = function (serviceIdentifier) {\n        try {\n            this._bindingDictionary.remove(serviceIdentifier);\n        }\n        catch (e) {\n            throw new Error(ERROR_MSGS.CANNOT_UNBIND + \" \" + getServiceIdentifierAsString(serviceIdentifier));\n        }\n    };\n    Container.prototype.unbindAll = function () {\n        this._bindingDictionary = new Lookup();\n    };\n    Container.prototype.isBound = function (serviceIdentifier) {\n        var bound = this._bindingDictionary.hasKey(serviceIdentifier);\n        if (!bound && this.parent) {\n            bound = this.parent.isBound(serviceIdentifier);\n        }\n        return bound;\n    };\n    Container.prototype.isBoundNamed = function (serviceIdentifier, named) {\n        return this.isBoundTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.isBoundTagged = function (serviceIdentifier, key, value) {\n        var bound = false;\n        if (this._bindingDictionary.hasKey(serviceIdentifier)) {\n            var bindings = this._bindingDictionary.get(serviceIdentifier);\n            var request_1 = createMockRequest(this, serviceIdentifier, key, value);\n            bound = bindings.some(function (b) { return b.constraint(request_1); });\n        }\n        if (!bound && this.parent) {\n            bound = this.parent.isBoundTagged(serviceIdentifier, key, value);\n        }\n        return bound;\n    };\n    Container.prototype.snapshot = function () {\n        this._snapshots.push(ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware));\n    };\n    Container.prototype.restore = function () {\n        var snapshot = this._snapshots.pop();\n        if (snapshot === undefined) {\n            throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);\n        }\n        this._bindingDictionary = snapshot.bindings;\n        this._middleware = snapshot.middleware;\n    };\n    Container.prototype.createChild = function (containerOptions) {\n        var child = new Container(containerOptions || this.options);\n        child.parent = this;\n        return child;\n    };\n    Container.prototype.applyMiddleware = function () {\n        var middlewares = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            middlewares[_i] = arguments[_i];\n        }\n        this._appliedMiddleware = this._appliedMiddleware.concat(middlewares);\n        var initial = (this._middleware) ? this._middleware : this._planAndResolve();\n        this._middleware = middlewares.reduce(function (prev, curr) { return curr(prev); }, initial);\n    };\n    Container.prototype.applyCustomMetadataReader = function (metadataReader) {\n        this._metadataReader = metadataReader;\n    };\n    Container.prototype.get = function (serviceIdentifier) {\n        return this._get(false, false, TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, false, TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getNamed = function (serviceIdentifier, named) {\n        return this.getTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.getAll = function (serviceIdentifier) {\n        return this._get(true, true, TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getAllTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, true, TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getAllNamed = function (serviceIdentifier, named) {\n        return this.getAllTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.resolve = function (constructorFunction) {\n        var tempContainer = this.createChild();\n        tempContainer.bind(constructorFunction).toSelf();\n        this._appliedMiddleware.forEach(function (m) {\n            tempContainer.applyMiddleware(m);\n        });\n        return tempContainer.get(constructorFunction);\n    };\n    Container.prototype._getContainerModuleHelpersFactory = function () {\n        var _this = this;\n        var setModuleId = function (bindingToSyntax, moduleId) {\n            bindingToSyntax._binding.moduleId = moduleId;\n        };\n        var getBindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _bind = _this.bind.bind(_this);\n                var bindingToSyntax = _bind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        var getUnbindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _unbind = _this.unbind.bind(_this);\n                _unbind(serviceIdentifier);\n            };\n        };\n        var getIsboundFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _isBound = _this.isBound.bind(_this);\n                return _isBound(serviceIdentifier);\n            };\n        };\n        var getRebindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _rebind = _this.rebind.bind(_this);\n                var bindingToSyntax = _rebind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        return function (mId) { return ({\n            bindFunction: getBindFunction(mId),\n            isboundFunction: getIsboundFunction(mId),\n            rebindFunction: getRebindFunction(mId),\n            unbindFunction: getUnbindFunction(mId)\n        }); };\n    };\n    Container.prototype._get = function (avoidConstraints, isMultiInject, targetType, serviceIdentifier, key, value) {\n        var result = null;\n        var defaultArgs = {\n            avoidConstraints: avoidConstraints,\n            contextInterceptor: function (context) { return context; },\n            isMultiInject: isMultiInject,\n            key: key,\n            serviceIdentifier: serviceIdentifier,\n            targetType: targetType,\n            value: value\n        };\n        if (this._middleware) {\n            result = this._middleware(defaultArgs);\n            if (result === undefined || result === null) {\n                throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN);\n            }\n        }\n        else {\n            result = this._planAndResolve()(defaultArgs);\n        }\n        return result;\n    };\n    Container.prototype._planAndResolve = function () {\n        var _this = this;\n        return function (args) {\n            var context = plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);\n            context = args.contextInterceptor(context);\n            var result = resolve(context);\n            return result;\n        };\n    };\n    return Container;\n}());\nexport { Container };\n//# sourceMappingURL=container.js.map","import { id } from \"../utils/id\";\nvar ContainerModule = (function () {\n    function ContainerModule(registry) {\n        this.id = id();\n        this.registry = registry;\n    }\n    return ContainerModule;\n}());\nexport { ContainerModule };\nvar AsyncContainerModule = (function () {\n    function AsyncContainerModule(registry) {\n        this.id = id();\n        this.registry = registry;\n    }\n    return AsyncContainerModule;\n}());\nexport { AsyncContainerModule };\n//# sourceMappingURL=container_module.js.map","import * as ERRORS_MSGS from \"../constants/error_msgs\";\nimport * as METADATA_KEY from \"../constants/metadata_keys\";\nfunction injectable() {\n    return function (target) {\n        if (Reflect.hasOwnMetadata(METADATA_KEY.PARAM_TYPES, target)) {\n            throw new Error(ERRORS_MSGS.DUPLICATED_INJECTABLE_DECORATOR);\n        }\n        var types = Reflect.getMetadata(METADATA_KEY.DESIGN_PARAM_TYPES, target) || [];\n        Reflect.defineMetadata(METADATA_KEY.PARAM_TYPES, types, target);\n        return target;\n    };\n}\nexport { injectable };\n//# sourceMappingURL=injectable.js.map","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122 § 4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/no-shadow */\n\nimport 'reflect-metadata';\n\nexport type TokenOption = {\n  multiple?: boolean;\n};\n\nexport type Newable<T> = new (...args: any[]) => T;\n\nexport type Decorator<T> = (target: Newable<T> | Abstract<T>) => any;\nexport type Abstract<T> = {\n  prototype: T;\n};\n\nexport type Disposable = {\n  /**\n   * Dispose this object.\n   */\n  dispose: () => void;\n};\nexport namespace Syringe {\n  /**\n   * 定义注入标识，默认允许多重注入\n   */\n  export const defineToken = (name: string, option: Partial<TokenOption> = { multiple: true }) =>\n    new Syringe.DefinedToken(name, option);\n  export class DefinedToken {\n    /**\n     * 兼容 inversify identifier\n     */\n    prototype: any = {};\n    protected name: string;\n    readonly multiple: boolean;\n    readonly symbol: symbol;\n    constructor(name: string, option: Partial<TokenOption> = {}) {\n      const { multiple = false } = option;\n      this.name = name;\n      this.symbol = Symbol(this.name);\n      this.multiple = multiple;\n    }\n  }\n\n  export type Register = <T = any>(\n    token: Syringe.Token<T> | Syringe.InjectOption<T>,\n    options?: Syringe.InjectOption<T>,\n  ) => void;\n\n  export type Token<T> = string | symbol | Newable<T> | Abstract<T> | DefinedToken;\n  export type Named = string | symbol | DefinedToken;\n  export type NamedToken<T> = {\n    token: Token<T>;\n    named: Named;\n  };\n  export type OverrideToken<T> = {\n    token: Token<T>;\n    override: boolean;\n  };\n\n  export type Registry = (register: Register) => void;\n  export type Module = {\n    id: number;\n  };\n\n  export function isModule(data: Record<any, any> | undefined): data is Module {\n    return !!data && typeof data === 'object' && 'id' in data;\n  }\n\n  export type Container = {\n    parent?: Container;\n    remove: <T>(token: Syringe.Token<T>) => void;\n    register: <T = any>(\n      token: Syringe.Token<T> | Syringe.InjectOption<T>,\n      options?: Syringe.InjectOption<T>,\n    ) => void;\n    load: (module: Module, force?: boolean) => Disposable;\n    unload: (module: Module) => void;\n    get: <T>(token: Syringe.Token<T>) => T;\n    getNamed: <T>(token: Syringe.Token<T>, named: Syringe.Named) => T;\n    getAll: <T>(token: Syringe.Token<T>) => T[];\n    getAllNamed: <T>(token: Syringe.Token<T>, named: Syringe.Named) => T[];\n    isBound: <T>(token: Syringe.Token<T>) => boolean;\n    isBoundNamed: <T>(token: Syringe.Token<T>, named: Syringe.Named) => boolean;\n    createChild: () => Container;\n  };\n\n  export type Context = {\n    container: Container;\n  };\n  export type UnionToken<T> = Token<T> | NamedToken<T>;\n  export type Class<T> = Newable<T>;\n  export type Factory<T> = (ctx: Context) => (...args: any) => T;\n  export type Dynamic<T> = (ctx: Context) => T;\n  export type MaybeArray<T> = T | T[];\n\n  export type DecoratorOption<T> = {\n    token?: MaybeArray<UnionToken<T>>;\n    contrib?: MaybeArray<Token<T>>;\n    lifecycle?: Lifecycle;\n  };\n\n  export type TargetOption<T> = {\n    contrib?: MaybeArray<Token<T>>;\n  } & ValueOption<T>;\n\n  export type ValueOption<T> = {\n    useClass?: MaybeArray<Class<T>>;\n    useDynamic?: MaybeArray<Dynamic<T>>;\n    useFactory?: MaybeArray<Factory<T>>;\n    useValue?: T;\n  };\n\n  export type InjectOption<T> = DecoratorOption<T> & ValueOption<T>;\n\n  export enum Lifecycle {\n    singleton = 'singleton',\n    transient = 'transient',\n  }\n  export const ClassOptionSymbol = Symbol('SyringeClassOptionSymbol');\n\n  export type FormattedInjectOption<T> = {\n    token: UnionToken<T>[];\n    contrib: Token<T>[];\n    useClass: Class<T>[];\n    lifecycle: Lifecycle;\n    useDynamic: Dynamic<T>[];\n    useFactory: Factory<T>[];\n    useValue?: T;\n  } & InjectOption<T>;\n\n  export const DefaultOption: Syringe.InjectOption<any> = {\n    lifecycle: Lifecycle.transient,\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport namespace Utils {\n  export function toArray<T>(maybeArray: Syringe.MaybeArray<T> | undefined): T[] {\n    if (Array.isArray(maybeArray)) {\n      return maybeArray;\n    }\n    if (maybeArray === undefined) {\n      return [];\n    }\n    return [maybeArray];\n  }\n  export function isClass(\n    data?: string | symbol | Record<string, any>,\n  ): data is Syringe.Class<any> {\n    return !!(data && typeof data === 'function' && 'prototype' in data);\n  }\n  export function isDefinedToken(\n    data: Record<string, any> | undefined | symbol | string | number,\n  ): data is Syringe.DefinedToken {\n    return !!(data && typeof data === 'object' && 'symbol' in data && 'multiple' in data);\n  }\n  export function isInjectOption<T>(\n    data: Syringe.Token<T> | Syringe.InjectOption<T> | undefined,\n  ): data is Syringe.InjectOption<T> {\n    return !!(data && typeof data === 'object' && 'token' in data);\n  }\n\n  export function isNamedToken<T>(\n    data: Syringe.UnionToken<T> | undefined,\n  ): data is Syringe.NamedToken<T> {\n    return !!(data && typeof data === 'object' && 'token' in data && 'named' in data);\n  }\n  export function isMultipleEnabled<T>(token: Syringe.Token<T>): boolean {\n    return Utils.isDefinedToken(token) && token.multiple;\n  }\n}\n","import type { interfaces } from 'inversify';\nimport { Container } from 'inversify';\nimport { Syringe, Utils } from '../core';\nimport type { InversifyRegister } from './inversify-protocol';\n\nexport function bindSingleton<T>(\n  toBind: interfaces.BindingInSyntax<T>,\n): interfaces.BindingWhenOnSyntax<T> {\n  return toBind.inSingletonScope();\n}\n\nexport function bindTransient<T>(\n  toBind: interfaces.BindingInSyntax<T>,\n): interfaces.BindingWhenOnSyntax<T> {\n  return toBind.inTransientScope();\n}\nexport function bindLifecycle<T>(\n  toBind: interfaces.BindingInSyntax<T>,\n  option: Syringe.FormattedInjectOption<T>,\n): interfaces.BindingWhenOnSyntax<T> {\n  if (option.lifecycle === Syringe.Lifecycle.singleton) {\n    return bindSingleton(toBind);\n  }\n  return bindTransient(toBind);\n}\n\nexport function bindNamed<T>(\n  toBind: interfaces.BindingWhenOnSyntax<T>,\n  named: Syringe.Named,\n): void {\n  toBind.whenTargetNamed(namedToIdentifier(named));\n}\n\nexport function bindGeneralToken<T>(\n  token: interfaces.ServiceIdentifier<T>,\n  register: InversifyRegister,\n): interfaces.BindingToSyntax<T> {\n  return register.bind(tokenToIdentifier(token));\n}\nexport function bindMonoToken<T>(\n  token: interfaces.ServiceIdentifier<T>,\n  register: InversifyRegister,\n): interfaces.BindingToSyntax<T> {\n  if (register.isBound(tokenToIdentifier(token))) {\n    try {\n      return register.rebind(tokenToIdentifier(token));\n    } catch (ex) {\n      // not bind in crrent container\n      return register.bind(tokenToIdentifier(token));\n    }\n  }\n  return register.bind(tokenToIdentifier(token));\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function namedToIdentifier(named: Syringe.Named): string | symbol {\n  if (Utils.isDefinedToken(named)) {\n    return named.symbol;\n  }\n  return named;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function tokenToIdentifier<T = any>(\n  token: Syringe.Token<T>,\n): interfaces.ServiceIdentifier<T> {\n  if (Utils.isDefinedToken(token)) {\n    return token.symbol;\n  }\n  return token;\n}\nexport const GlobalContainer = new Container();\n\nexport * from './inversify-protocol';\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport {\n  injectable as inversInjectable,\n  inject as inversifyInject,\n  named as inversifyNamed,\n} from 'inversify';\nimport type { Decorator } from './core';\nimport { Syringe } from './core';\nimport { namedToIdentifier, tokenToIdentifier } from './inversify';\n\nexport function injectable<T = any>(option: Syringe.DecoratorOption<T> = {}): Decorator<T> {\n  const decorator = inversInjectable();\n  return (target: any) => {\n    Reflect.defineMetadata(Syringe.ClassOptionSymbol, { ...option, target }, target);\n    decorator(target);\n  };\n}\n\nexport function singleton<T = any>(option: Syringe.DecoratorOption<T> = {}): Decorator<T> {\n  return injectable({ ...option, lifecycle: Syringe.Lifecycle.singleton });\n}\n\nexport function transient<T = any>(option: Syringe.DecoratorOption<T> = {}): Decorator<T> {\n  return injectable({ ...option, lifecycle: Syringe.Lifecycle.transient });\n}\n\nexport function inject(\n  token: Syringe.Token<any>,\n): (target: any, targetKey: string, index?: number | undefined) => void {\n  return inversifyInject(tokenToIdentifier(token));\n}\nexport function named(\n  name: Syringe.Named,\n): (target: any, targetKey: string, index?: number | undefined) => void {\n  return inversifyNamed(namedToIdentifier(name));\n}\nexport { postConstruct, optional, unmanaged, decorate } from 'inversify';\n","import * as METADATA_KEY from \"../constants/metadata_keys\";\nimport { Metadata } from \"../planning/metadata\";\nimport { tagParameter, tagProperty } from \"./decorator_utils\";\nfunction named(name) {\n    return function (target, targetKey, index) {\n        var metadata = new Metadata(METADATA_KEY.NAMED_TAG, name);\n        if (typeof index === \"number\") {\n            tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexport { named };\n//# sourceMappingURL=named.js.map","import type { Syringe } from './core';\n\nexport const OptionSymbol = Symbol('SyringeOptionSymbol');\nexport const registerSideOption = <T extends Record<any, any> = any, R = any>(\n  option: Syringe.InjectOption<R>,\n  target: T,\n) => {\n  Reflect.defineMetadata(OptionSymbol, option, target);\n};\n","import type { interfaces } from 'inversify';\nimport type { InversifyRegister } from './inversify';\nimport { isInversifyRegister } from './inversify';\nimport { bindNamed, bindGeneralToken, bindMonoToken, bindLifecycle } from './inversify';\nimport { Utils, Syringe } from './core';\nimport { OptionSymbol } from './side-option';\nimport { Container } from './container';\n\nexport function toRegistryOption<P>(\n  options: Syringe.InjectOption<P>,\n): Syringe.FormattedInjectOption<P> {\n  const token = Utils.toArray(options.token);\n  const useClass = Utils.toArray(options.useClass);\n  const useDynamic = Utils.toArray(options.useDynamic);\n  const useFactory = Utils.toArray(options.useFactory);\n  const contrib = Utils.toArray(options.contrib);\n  const lifecycle = options.lifecycle || Syringe.Lifecycle.transient;\n\n  const generalOption: Syringe.FormattedInjectOption<P> = {\n    token,\n    useClass,\n    lifecycle: contrib.length > 0 ? Syringe.Lifecycle.singleton : lifecycle,\n    contrib,\n    useDynamic,\n    useFactory,\n  };\n  if ('useValue' in options) {\n    generalOption.useValue = options.useValue;\n  }\n  return generalOption;\n}\nexport class Register<T> {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  static globalConfig: Syringe.InjectOption<any> = Syringe.DefaultOption;\n  /**\n   * 注册目标 token，合并 token 配置后基于配置注册\n   */\n  static resolveTarget<R>(\n    register: InversifyRegister,\n    target: Syringe.Token<R>,\n    option: Syringe.TargetOption<R> = {},\n  ): void {\n    try {\n      try {\n        const sideOption = Reflect.getMetadata(OptionSymbol, target);\n        if (sideOption) {\n          Register.resolveOption(register, sideOption);\n        }\n      } catch (ex) {\n        // noop\n      }\n      // 当 target 为类时，将其插入 useClass 配置中\n      if (Utils.isClass(target)) {\n        if (!option.useClass) {\n          option.useClass = [target];\n        } else {\n          const classes = Utils.toArray(option.useClass);\n          classes.unshift(target);\n          option.useClass = classes;\n        }\n      }\n      let mixedOption;\n      try {\n        mixedOption = Reflect.getMetadata(Syringe.ClassOptionSymbol, target);\n      } catch (ex) {\n        // noop\n      }\n      mixedOption = {\n        ...(mixedOption || {}),\n        ...option,\n      };\n      if (!mixedOption.token) {\n        mixedOption.token = [target];\n      } else {\n        const tokens = Utils.toArray(mixedOption.token);\n        tokens.unshift(target);\n        mixedOption.token = tokens;\n      }\n      Register.resolveOption(register, mixedOption);\n    } catch (ex) {\n      // noop\n    }\n  }\n  /**\n   * 基于配置注册\n   */\n  static resolveOption<R>(iRegister: InversifyRegister, baseOption: Syringe.InjectOption<R>): void {\n    const parsedOption = toRegistryOption({\n      ...Register.globalConfig,\n      ...baseOption,\n    });\n    if (\n      parsedOption.useClass.length === 0 &&\n      parsedOption.useDynamic.length === 0 &&\n      parsedOption.useFactory.length === 0 &&\n      !('useValue' in parsedOption)\n    ) {\n      return;\n    }\n\n    parsedOption.token.forEach(token => {\n      const register = new Register(iRegister, token, { ...parsedOption });\n      register.resolve();\n    });\n  }\n\n  protected token: Syringe.UnionToken<T>;\n  protected rawToken: Syringe.Token<T>;\n  protected named?: Syringe.Named;\n  /**\n   * 兼容 inversify\n   */\n  protected generalToken: interfaces.ServiceIdentifier<T>;\n  protected option: Syringe.FormattedInjectOption<T>;\n  protected register: InversifyRegister;\n  protected mutiple: boolean;\n  constructor(\n    register: InversifyRegister,\n    token: Syringe.UnionToken<T>,\n    option: Syringe.FormattedInjectOption<T>,\n  ) {\n    this.register = register;\n    this.token = token;\n    this.option = option;\n    this.rawToken = Utils.isNamedToken(token) ? token.token : token;\n    this.named = Utils.isNamedToken(token) ? token.named : undefined;\n    this.mutiple = !!this.named || Utils.isMultipleEnabled(this.rawToken);\n    this.generalToken = this.rawToken;\n  }\n  /**\n   * multi or mono register\n   * mono bind 优先级 useValue > useDynamic > useFactory > useClass\n   */\n  resolve(): void {\n    const { register } = this;\n    if (!isInversifyRegister(register)) {\n      return;\n    }\n    if (this.mutiple) {\n      this.resolveMutilple(register);\n    } else {\n      this.resolveMono(register);\n      if (!this.named && this.option.contrib.length > 0) {\n        this.option.contrib.forEach(contribution => {\n          if (Utils.isMultipleEnabled(contribution)) {\n            bindGeneralToken(contribution, register).toService(this.generalToken);\n          } else {\n            bindMonoToken(contribution, register).toService(this.generalToken);\n          }\n        });\n      }\n    }\n  }\n  // eslint-disable-next-line consistent-return\n  protected resolveMono(\n    register: InversifyRegister,\n  ): interfaces.BindingWhenOnSyntax<T> | undefined {\n    if ('useValue' in this.option) {\n      return bindMonoToken(this.generalToken, register).toConstantValue(this.option.useValue!);\n    }\n    if (this.option.useDynamic.length > 0) {\n      const dynamic = this.option.useDynamic[this.option.useDynamic.length - 1];\n      return bindLifecycle(\n        bindMonoToken(this.generalToken, register).toDynamicValue(ctx => {\n          const container = Container.getContainer(ctx.container)!;\n          return dynamic({ container });\n        }),\n        this.option,\n      );\n    }\n    if (this.option.useFactory.length > 0) {\n      const factrory = this.option.useFactory[this.option.useFactory.length - 1];\n      return bindMonoToken(this.generalToken, register).toFactory(ctx => {\n        const container = Container.getContainer(ctx.container)!;\n        return factrory({ container });\n      });\n    }\n    if (this.option.useClass.length > 0) {\n      const newable = this.option.useClass[this.option.useClass.length - 1];\n      return bindLifecycle(bindMonoToken(this.generalToken, register).to(newable), this.option);\n    }\n  }\n  protected resolveMutilple(register: InversifyRegister): void {\n    const classesList = this.option.useClass.map(newable =>\n      bindLifecycle(bindGeneralToken(this.generalToken, register).to(newable), this.option),\n    );\n    const dynamicList = this.option.useDynamic.map(dynamic =>\n      bindLifecycle(\n        bindGeneralToken(this.generalToken, register).toDynamicValue(ctx => {\n          const container = Container.getContainer(ctx.container)!;\n          return dynamic({ container });\n        }),\n        this.option,\n      ),\n    );\n    const factoryList = this.option.useFactory.map(factrory =>\n      bindGeneralToken(this.generalToken, register).toFactory(ctx => {\n        const container = Container.getContainer(ctx.container)!;\n        return factrory({ container });\n      }),\n    );\n    const valueToBind =\n      'useValue' in this.option\n        ? bindGeneralToken(this.generalToken, register).toConstantValue(this.option.useValue!)\n        : undefined;\n    if (this.named) {\n      classesList.forEach(tobind => this.named && bindNamed(tobind, this.named));\n      dynamicList.forEach(tobind => this.named && bindNamed(tobind, this.named));\n      factoryList.forEach(tobind => this.named && bindNamed(tobind, this.named));\n      if (valueToBind) {\n        bindNamed(valueToBind, this.named);\n      }\n    }\n  }\n}\n","import type { interfaces } from 'inversify';\nexport type InversifyContext = {\n  container: interfaces.Container;\n};\nexport function isInversifyContext(data: Record<any, any>): data is InversifyContext {\n  return data && typeof data === 'object' && 'container' in data && 'inversify' in data;\n}\n\nexport type InversifyRegister = {\n  bind: interfaces.Bind;\n  unbind: interfaces.Unbind;\n  isBound: interfaces.IsBound;\n  rebind: interfaces.Rebind;\n};\n\nexport function isInversifyRegister(data: Record<any, any>): data is InversifyRegister {\n  return (\n    data &&\n    typeof data === 'object' &&\n    'bind' in data &&\n    'unbind' in data &&\n    'rebind' in data &&\n    'isBound' in data\n  );\n}\n","import { Syringe } from '../core';\n\nexport type Option = {\n  /**\n   * collected from the parent containers\n   */\n  recursive?: boolean;\n  /**\n   * use cache\n   */\n  cache?: boolean;\n};\nexport type Provider<T extends Record<string, any>> = {\n  getContributions: (option?: Option) => T[];\n};\nexport const Provider = Syringe.defineToken('ContributionProvider');\n","import type { Syringe } from '../core';\nimport type { Option, Provider } from './contribution-protocol';\n\nexport class DefaultContributionProvider<T extends Record<string, any>> implements Provider<T> {\n  protected option: Option = { recursive: false, cache: true };\n  protected services: T[] | undefined;\n  protected readonly serviceIdentifier: Syringe.Token<T>;\n  protected readonly container: Syringe.Container;\n  constructor(serviceIdentifier: Syringe.Token<T>, container: Syringe.Container, option?: Option) {\n    this.container = container;\n    this.serviceIdentifier = serviceIdentifier;\n    if (option) {\n      this.option = { ...this.option, ...option };\n    }\n  }\n\n  protected setServices(recursive: boolean): T[] {\n    const currentServices: T[] = [];\n    let currentContainer: Syringe.Container | undefined = this.container;\n    while (currentContainer) {\n      if (currentContainer.isBound(this.serviceIdentifier)) {\n        const list = currentContainer.getAll(this.serviceIdentifier);\n        currentServices.push(...list);\n      }\n      currentContainer = recursive ? currentContainer.parent : undefined;\n    }\n    return currentServices;\n  }\n\n  getContributions(option: Option = {}): T[] {\n    const { cache, recursive } = { ...this.option, ...option };\n    if (!cache || this.services === undefined) {\n      this.services = this.setServices(!!recursive);\n    }\n    return this.services;\n  }\n}\n","import { Syringe } from '../core';\nimport * as Contribution from './contribution-protocol';\nimport type { Provider, Option } from './contribution-protocol';\nimport { DefaultContributionProvider } from './contribution-provider';\n\nexport function contributionInjectOption(\n  token: Syringe.DefinedToken,\n  option?: Option,\n): Syringe.InjectOption<Provider<Syringe.DefinedToken>> {\n  return {\n    token: { token: Contribution.Provider, named: token },\n    useDynamic: ctx => {\n      return new DefaultContributionProvider(token, ctx.container, option);\n    },\n    lifecycle: Syringe.Lifecycle.singleton,\n  };\n}\n\nexport function contributionRegister(\n  registerMethod: Syringe.Register,\n  identifier: Syringe.DefinedToken,\n  option?: Option,\n): void {\n  registerMethod({\n    token: { token: Contribution.Provider, named: identifier },\n    useDynamic: ctx => {\n      return new DefaultContributionProvider(identifier, ctx.container, option);\n    },\n    lifecycle: Syringe.Lifecycle.singleton,\n  });\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type { Syringe } from '../core';\nimport { Utils } from '../core';\nimport { contributionInjectOption } from '../contribution/contribution-register';\nimport type { interfaces } from 'inversify';\nimport { ContainerModule } from 'inversify';\nimport type { InversifyRegister } from '../inversify';\nimport { Register } from '../register';\n\ntype TokenOrOption<T> = Syringe.Token<T> | Syringe.InjectOption<T>;\n\nexport class SyringeModule implements Syringe.Module {\n  /**\n   * @readonly\n   * module unique id\n   */\n  readonly id: number;\n  readonly inversifyModule: ContainerModule;\n\n  protected baseRegistry?: Syringe.Registry;\n  protected optionCollection?: (Syringe.Token<any> | Syringe.InjectOption<any>)[];\n\n  constructor(registry?: Syringe.Registry) {\n    this.baseRegistry = registry;\n    this.inversifyModule = new ContainerModule(this.inversifyRegister);\n    this.id = this.inversifyModule.id;\n  }\n  protected inversifyRegister = (\n    bind: interfaces.Bind,\n    unbind: interfaces.Unbind,\n    isBound: interfaces.IsBound,\n    rebind: interfaces.Rebind,\n  ) => {\n    const inversifyRegister: InversifyRegister = {\n      bind,\n      unbind,\n      isBound,\n      rebind,\n    };\n    const register = <T = any>(\n      token: Syringe.Token<T> | Syringe.InjectOption<T>,\n      options: Syringe.InjectOption<T> = {},\n    ): void => {\n      if (Utils.isInjectOption(token)) {\n        Register.resolveOption(inversifyRegister, token);\n      } else {\n        Register.resolveTarget(inversifyRegister, token, options);\n      }\n    };\n    if (this.baseRegistry) {\n      this.baseRegistry(register);\n    }\n    if (this.optionCollection) {\n      this.optionCollection.forEach(option => register(option));\n    }\n  };\n\n  protected get options() {\n    if (!this.optionCollection) {\n      this.optionCollection = [];\n    }\n    return this.optionCollection;\n  }\n  register(...options: TokenOrOption<any>[]) {\n    options.forEach(option => this.options.push(option));\n    return this;\n  }\n\n  contribution(...tokens: Syringe.DefinedToken[]) {\n    tokens.forEach(token => this.options.push(contributionInjectOption(token)));\n    return this;\n  }\n}\n\nexport function isSyringeModule(data: Syringe.Module): data is SyringeModule {\n  return data && 'inversifyModule' in data;\n}\n","import type { interfaces } from 'inversify';\nimport { Container as InversifyContainer } from 'inversify';\nimport type { InversifyContext } from './inversify/inversify-protocol';\nimport {\n  GlobalContainer as InversifyGlobalContainer,\n  namedToIdentifier,\n  tokenToIdentifier,\n} from './inversify';\nimport type { Disposable, Syringe } from './core';\nimport { Utils } from './core';\nimport { Register } from './register';\nimport { isSyringeModule } from './module';\n\nconst ContainerMap = new Map<number, Syringe.Container>();\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport class Container implements Syringe.Container, InversifyContext {\n  static setContainer(key: interfaces.Container, value: Syringe.Container) {\n    return ContainerMap.set(key.id, value);\n  }\n  static getContainer(key: interfaces.Container) {\n    const exist = ContainerMap.get(key.id);\n    if (!exist) {\n      const container = new Container(key);\n      Container.setContainer(key, container);\n      return container;\n    }\n    return exist;\n  }\n  static config(option: Syringe.InjectOption<void>): void {\n    Register.globalConfig = option;\n  }\n\n  protected loadedModules: number[] = [];\n  container: interfaces.Container;\n  protected inversify: boolean = true;\n  parent?: Container;\n  constructor(inversifyContainer?: interfaces.Container) {\n    if (inversifyContainer) {\n      this.container = inversifyContainer;\n    } else {\n      this.container = new InversifyContainer();\n    }\n    Container.setContainer(this.container, this);\n  }\n  load(module: Syringe.Module, force?: boolean): Disposable {\n    if (force || !this.loadedModules.includes(module.id)) {\n      if (isSyringeModule(module)) {\n        this.container.load(module.inversifyModule);\n      } else {\n        console.warn('Unsupported module.', module);\n      }\n      this.loadedModules.push(module.id);\n      return {\n        dispose: () => {\n          this.unload(module);\n        },\n      };\n    }\n    return { dispose: () => {} };\n  }\n  unload(module: Syringe.Module): void {\n    if (isSyringeModule(module)) {\n      this.container.unload(module.inversifyModule);\n      this.loadedModules = this.loadedModules.filter(id => id !== module.id);\n    }\n  }\n  remove<T>(token: Syringe.Token<T>): void {\n    return this.container.unbind(tokenToIdentifier(token));\n  }\n  get<T>(token: Syringe.Token<T>): T {\n    return this.container.get(tokenToIdentifier(token));\n  }\n  getNamed<T>(token: Syringe.Token<T>, named: Syringe.Named): T {\n    return this.container.getNamed(tokenToIdentifier(token), namedToIdentifier(named));\n  }\n  getAll<T>(token: Syringe.Token<T>): T[] {\n    return this.container.getAll(tokenToIdentifier(token));\n  }\n  getAllNamed<T>(token: Syringe.Token<T>, named: Syringe.Named): T[] {\n    return this.container.getAllNamed(tokenToIdentifier(token), namedToIdentifier(named));\n  }\n\n  isBound<T>(token: Syringe.Token<T>): boolean {\n    return this.container.isBound(tokenToIdentifier(token));\n  }\n\n  isBoundNamed<T>(token: Syringe.Token<T>, named: Syringe.Named): boolean {\n    return this.container.isBoundNamed(tokenToIdentifier(token), namedToIdentifier(named));\n  }\n\n  createChild(): Syringe.Container {\n    const childContainer = this.container.createChild();\n    const child = new Container(childContainer);\n    child.parent = this;\n    return child;\n  }\n  register<T = any>(tokenOrOption: Syringe.Token<T> | Syringe.InjectOption<T>): void;\n  register<T = any>(token: Syringe.Token<T>, options: Syringe.InjectOption<T>): void;\n  register<T = any>(\n    token: Syringe.Token<T> | Syringe.InjectOption<T>,\n    options: Syringe.InjectOption<T> = {},\n  ): void {\n    if (Utils.isInjectOption(token)) {\n      Register.resolveOption(this.container, token);\n    } else {\n      Register.resolveTarget(this.container, token, options);\n    }\n  }\n}\n\nexport const GlobalContainer = new Container(InversifyGlobalContainer);\n\nexport const register: Syringe.Register = GlobalContainer.register.bind(GlobalContainer);\n","import * as Protocol from './contribution-protocol';\nimport { contributionRegister } from './contribution-register';\n\nexport * from './contribution-protocol';\nexport * from './contribution-provider';\nexport * from './decorator';\n\nexport namespace Contribution {\n  export type Option = Protocol.Option;\n  export type Provider<T extends Record<string, any>> = Protocol.Provider<T>;\n  export const Provider = Protocol.Provider;\n  export const register = contributionRegister;\n}\n","import type { Syringe } from '../core';\nimport { SyringeModule } from './syringe-module';\n\nexport * from './syringe-module';\nexport function Module(register?: Syringe.Registry): SyringeModule {\n  return new SyringeModule(register);\n}\n","import type { Syringe } from '../core';\nimport { inject, named } from '../decorator';\nimport { Provider } from './contribution-protocol';\n\nexport const contrib =\n  (token: Syringe.Named) =>\n  (\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    target: any,\n    targetKey: string,\n    index?: number | undefined,\n  ) => {\n    named(token)(target, targetKey, index);\n    inject(Provider)(target, targetKey, index);\n  };\n","import * as METADATA_KEY from \"../constants/metadata_keys\";\nimport { Metadata } from \"../planning/metadata\";\nimport { tagParameter, tagProperty } from \"./decorator_utils\";\nfunction optional() {\n    return function (target, targetKey, index) {\n        var metadata = new Metadata(METADATA_KEY.OPTIONAL_TAG, true);\n        if (typeof index === \"number\") {\n            tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexport { optional };\n//# sourceMappingURL=optional.js.map","import * as ERRORS_MSGS from \"../constants/error_msgs\";\nimport * as METADATA_KEY from \"../constants/metadata_keys\";\nimport { Metadata } from \"../planning/metadata\";\nfunction postConstruct() {\n    return function (target, propertyKey, descriptor) {\n        var metadata = new Metadata(METADATA_KEY.POST_CONSTRUCT, propertyKey);\n        if (Reflect.hasOwnMetadata(METADATA_KEY.POST_CONSTRUCT, target.constructor)) {\n            throw new Error(ERRORS_MSGS.MULTIPLE_POST_CONSTRUCT_METHODS);\n        }\n        Reflect.defineMetadata(METADATA_KEY.POST_CONSTRUCT, metadata, target.constructor);\n    };\n}\nexport { postConstruct };\n//# sourceMappingURL=post_construct.js.map","import * as METADATA_KEY from \"../constants/metadata_keys\";\nimport { Metadata } from \"../planning/metadata\";\nimport { tagParameter } from \"./decorator_utils\";\nfunction unmanaged() {\n    return function (target, targetKey, index) {\n        var metadata = new Metadata(METADATA_KEY.UNMANAGED_TAG, true);\n        tagParameter(target, targetKey, index, metadata);\n    };\n}\nexport { unmanaged };\n//# sourceMappingURL=unmanaged.js.map"],"names":["NAMED_TAG","NAME_TAG","UNMANAGED_TAG","OPTIONAL_TAG","INJECT_TAG","MULTI_INJECT_TAG","TAGGED","TAGGED_PROP","PARAM_TYPES","POST_CONSTRUCT","NON_CUSTOM_TAG_KEYS","BindingScopeEnum","BindingTypeEnum","TargetTypeEnum","idCounter","id","Binding","serviceIdentifier","scope","this","activated","type","constraint","request","implementationType","cache","factory","provider","onActivation","dynamicValue","prototype","clone","NULL_ARGUMENT","KEY_NOT_FOUND","AMBIGUOUS_MATCH","NOT_REGISTERED","MetadataReader","getConstructorMetadata","constructorFunc","compilerGeneratedMetadata","Reflect","getMetadata","METADATA_KEY.PARAM_TYPES","userGeneratedMetadata","METADATA_KEY.TAGGED","getPropertiesMetadata","METADATA_KEY.TAGGED_PROP","BindingCount","isStackOverflowExeption","error","RangeError","message","getServiceIdentifierAsString","name","listRegisteredBindingsForServiceIdentifier","container","getBindings","registeredBindingsList","registeredBindings","length","forEach","binding","getFunctionName","metaData","alreadyDependencyChain","parentRequest","circularDependencyToException","childRequests","childRequest","services","_createStringArr","req","result","push","reverse","join","dependencyChainToString","Error","ERROR_MSGS.CIRCULAR_DEPENDENCY","v","name_1","match","Context","addPlan","plan","setCurrentRequest","currentRequest","Metadata","key","value","toString","METADATA_KEY.NAMED_TAG","Plan","parentContext","rootRequest","tagParameter","annotationTarget","propertyName","parameterIndex","metadata","_tagParameterOrProperty","tagProperty","constructor","metadataKey","paramsOrPropertiesMetadata","isParameterDecorator","undefined","hasOwnMetadata","paramOrPropertyMetadata","Array","isArray","_i","paramOrPropertyMetadata_1","m","ERROR_MSGS.DUPLICATED_METADATA","defineMetadata","_decorate","decorators","target","decorate","_param","paramIndex","decorator","LazyServiceIdentifer","cb","_cb","unwrap","QueryableString","str","startsWith","searchString","indexOf","endsWith","reverseString","reverseSearchString","split","call","contains","equals","compareString","Target","namedOrTagged","metadataItem","hasTag","_a","METADATA_KEY.MULTI_INJECT_TAG","matchesArray","matchesTag","isNamed","isTagged","some","METADATA_KEY.NON_CUSTOM_TAG_KEYS","every","isOptional","METADATA_KEY.OPTIONAL_TAG","getNamedTag","filter","getCustomTags","matchesNamedTag","_this","__spreadArray","to","from","i","il","j","getTargets","metadataReader","constructorName","func","isBaseClass","serviceIdentifiers","ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION","constructorArgsMetadata","keys","Object","constructorTargets","iterations","targets","getConstructorArgsAsTarget","getConstructorArgsAsTargets","propertyTargets","getClassPropsAsTargets","index","targetMetadata","formatTargetMetadata","isManaged","unmanaged","injectIdentifier","inject","multiInject","Function","ERROR_MSGS.MISSING_INJECT_ANNOTATION","targetName","classPropsMetadata","keys_1","baseConstructor","getPrototypeOf","baseTargets","getBaseClassDependencyCount","map","t","METADATA_KEY.UNMANAGED_TAG","unmanagedCount","concat","apply","dependencyCount","targetMetadataMap","Request","bindings","requestScope","Map","addChildRequest","child","getBindingDictionary","cntnr","_bindingDictionary","_getActiveBindings","avoidConstraints","context","activeBindings","options","autoBindInjectable","bind","toSelf","serviceIdentifierString","msg","ERROR_MSGS.NOT_REGISTERED","m_1","namedTag","otherTags","tag","listMetadataForTarget","ERROR_MSGS.AMBIGUOUS_MATCH","_validateActiveBindingCount","_createSubRequests","thePlan","subChildRequest","dependencies","getDependencies","skipBaseClassChecks","values","arguments","ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH","dependency","bindingDictionary","hasKey","get","parent","isMultiInject","targetType","injectMetadata","METADATA_KEY.INJECT_TAG","tagMetadata","_createTarget","resolveInstance","constr","resolveRequest","Func","constructorInjections","instance","propertyInjectionsRequests","propertyInjections","r","_injectProperties","hasMetadata","METADATA_KEY.POST_CONSTRUCT","data","e","POST_CONSTRUCT_ERROR","_postConstruct","invokeFactory","factoryType","fn","ERROR_MSGS.CIRCULAR_DEPENDENCY_IN_FACTORY","_resolveRequest","targetIsAnArray","targetParentIsNotAnArray","_f","binding_1","isSingleton","isRequestSingleton","has","ERROR_MSGS.INVALID_BINDING_TYPE","set","traverseAncerstors","taggedConstraint","namedConstraint","typeConstraint","BindingWhenSyntax","_binding","when","BindingOnSyntax","whenTargetNamed","whenTargetIsDefault","whenTargetTagged","whenInjectedInto","whenParentNamed","whenParentTagged","whenAnyAncestorIs","ancestor","whenNoAncestorIs","whenAnyAncestorNamed","whenNoAncestorNamed","whenAnyAncestorTagged","whenNoAncestorTagged","whenAnyAncestorMatches","whenNoAncestorMatches","handler","BindingWhenOnSyntax","_bindingWhenSyntax","_bindingOnSyntax","BindingInSyntax","inRequestScope","inSingletonScope","inTransientScope","BindingInWhenOnSyntax","_bindingInSyntax","BindingToSyntax","toConstantValue","toDynamicValue","toConstructor","toFactory","toFunction","bindingWhenOnSyntax","toAutoFactory","toProvider","toService","service","ContainerSnapshot","of","middleware","snapshot","Lookup","_map","getMap","add","ERROR_MSGS.NULL_ARGUMENT","entry","ERROR_MSGS.KEY_NOT_FOUND","remove","delete","removeByCondition","condition","entries","updatedEntries","copy","b","traverse","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","op","TypeError","pop","Container","containerOptions","_appliedMiddleware","defaultScope","_snapshots","_middleware","_metadataReader","merge","container1","container2","container3","targetContainers","targetContainer","copyDictionary","origin","destination","targetBindingDictionary","load","modules","getHelpers","_getContainerModuleHelpersFactory","modules_1","currentModule","containerModuleHelpers","registry","bindFunction","unbindFunction","isboundFunction","rebindFunction","loadAsync","modules_2","_b","unload","conditionFactory","expected","item","moduleId","module","rebind","unbind","ERROR_MSGS.CANNOT_UNBIND","unbindAll","isBound","bound","isBoundNamed","named","isBoundTagged","request_1","createMockRequest","restore","createChild","applyMiddleware","middlewares","initial","_planAndResolve","reduce","prev","curr","applyCustomMetadataReader","_get","getTagged","getNamed","getAll","getAllTagged","getAllNamed","constructorFunction","tempContainer","setModuleId","bindingToSyntax","getRebindFunction","_rebind","mId","_bind","_isBound","_unbind","defaultArgs","contextInterceptor","args","ContainerModule","injectable","types","Utils","bindLifecycle","toBind","option","lifecycle","Syringe","Lifecycle","singleton","bindSingleton","bindTransient","bindNamed","namedToIdentifier","bindGeneralToken","token","register","tokenToIdentifier","bindMonoToken","ex","isDefinedToken","symbol","root","global","self","exporter","makeExporter","previous","defineProperty","configurable","writable","hasOwn","hasOwnProperty","supportsSymbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","supportsCreate","create","supportsProto","__proto__","downLevel","HashMap","MakeDictionary","functionPrototype","usePolyfill","process","env","_Map","CreateMapPolyfill","_Set","Set","CreateSetPolyfill","WeakMap","CreateWeakMapPolyfill","propertyKey","attributes","IsUndefined","IsArray","IsConstructor","DecorateConstructor","IsObject","IsNull","DecorateProperty","ToPropertyKey","metadataValue","IsPropertyKey","OrdinaryDefineOwnMetadata","OrdinaryHasMetadata","OrdinaryHasOwnMetadata","OrdinaryGetMetadata","getOwnMetadata","OrdinaryGetOwnMetadata","getMetadataKeys","OrdinaryMetadataKeys","getOwnMetadataKeys","OrdinaryOwnMetadataKeys","deleteMetadata","metadataMap","GetOrCreateMetadataMap","size","decorated","descriptor","O","Create","MetadataKey","OrdinaryGetPrototypeOf","ToBoolean","MetadataValue","ownKeys","parentKeys","ownKeys_1","parentKeys_1","GetIterator","k","IteratorStep","nextValue","IteratorValue","IteratorClose","Type","x","IsSymbol","ToPrimitive","input","PreferredType","hint","exoticToPrim","GetMethod","OrdinaryToPrimitive","toString_1","IsCallable","valueOf","toString_2","argument","ToString","V","obj","method","iterResult","proto","prototypeProto","cacheSentinel","arraySentinel","MapIterator","selector","_index","_keys","_values","_selector","_cacheKey","_cacheIndex","enumerable","_find","clear","getKey","getValue","getEntry","insert","UUID_SIZE","rootKey","CreateUniqueKey","_key","table","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","Math","random","GenRandomBytes","Uint8Array","crypto","getRandomValues","msCrypto","offset","byte","toLowerCase","__","multiple","DefinedToken","_typeof","transient","maybeArray","GlobalContainer","inversInjectable","ClassOptionSymbol","targetKey","inversifyNamed","OptionSymbol","Register","rawToken","generalToken","mutiple","isNamedToken","isMultipleEnabled","resolveMutilple","resolveMono","contrib","contribution","useValue","useDynamic","dynamic","ctx","getContainer","useFactory","factrory","useClass","newable","classesList","_this2","dynamicList","factoryList","valueToBind","tobind","sideOption","resolveOption","isClass","classes","toArray","unshift","mixedOption","tokens","iRegister","baseOption","parsedOption","generalOption","toRegistryOption","globalConfig","DefaultOption","Provider","defineToken","DefaultContributionProvider","recursive","currentServices","currentContainer","list","setServices","contributionInjectOption","Contribution","contributionRegister","registerMethod","identifier","SyringeModule","inversifyModule","baseRegistry","optionCollection","inversifyRegister","isInjectOption","resolveTarget","_this3","isSyringeModule","ContainerMap","inversifyContainer","loadedModules","inversify","InversifyContainer","setContainer","force","includes","console","warn","dispose","exist","InversifyGlobalContainer","Protocol"],"mappings":"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"}